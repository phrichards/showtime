(this.webpackJsonpshowtime=this.webpackJsonpshowtime||[]).push([[0],{81:function(e,t,a){e.exports=a(93)},86:function(e,t,a){},88:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),o=a.n(s),i=(a(86),a(22)),c=a.n(i),h=a(41),l=a(48),u=a(26),p=a(27),d=a(29),m=a(28),w=a(31),f=(a(88),a(127)),v=a(128),b=a(95),E=a(130),g=a(124),k=a(52),S=a(62),O=a(11),C=a(129),j=a(126),y=a(133);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleAddArtistClick=function(){a.setState((function(e){return{artistInputs:[].concat(Object(l.a)(e.artistInputs),[r.a.createElement(E.a,{placeholder:"Artist/Band",name:"artist",onChange:a.handleArtistChange})])}}))},a.handleVenueChange=function(e){a.setState({venue:e.target.value})},a.handleArtistChange=function(e){return function(t){var n=a.state.artists.map((function(a,n){return e!==n?a:t.target.value}));a.setState({artists:n})}},a.handleDateChange=function(e){a.setState({date:e})},a.handleCheckboxClick=function(e){return function(t){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state,Object(k.a)({},e,t.target.checked)))}},a.handleFormSubmit=function(){var e=Object(h.a)(c.a.mark((function e(t){var n,r,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),[],n={date:a.state.date,venue:t.target.venue.value,seen:a.state.seenChecked,ticket:a.state.ticketChecked},r="",s="","update"===a.props.type?(r="/api/shows/update/".concat(a.props.showData._id),s="PUT"):(r="/api/shows/add",s="POST"),e.prev=6,e.next=9,fetch(r,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,a.props.type&&"update"===a.props.type?(a.props.toggleEditForm(),a.props.updateShow(i)):a.props.addNewShow(i),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(6),console.error(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteShow=Object(h.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete this show?")){e.next=3;break}return e.abrupt("return",a.props.deleteShow(a.props.showData._id));case 3:case"end":return e.stop()}}),e)}))),a.state={date:null,venue:null,artists:[],artistInputs:[],ticketChecked:!1,seenChecked:!1},a}return Object(w.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.showData){var t=this.props.showData.artists.map((function(t){return r.a.createElement(E.a,{value:t,onChange:e.handleArtistChange,name:t})}));this.setState({artistInputs:t,artists:this.props.showData.artists,ticketChecked:this.props.showData.ticket,seenChecked:this.props.showData.seen,venue:this.props.showData.venue})}}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleFormSubmit},this.state.artists.map((function(t,a){return r.a.createElement("div",{className:"artist"},r.a.createElement("input",{type:"text",placeholder:"Artist #".concat(a+1," name"),value:t,onChange:e.handleArtistChange(a)}))})),r.a.createElement("p",null,r.a.createElement(g.a,{onClick:this.handleAddArtistClick},"Add an artist")),r.a.createElement(E.a,{value:this.state.venue,placeholder:"Venue",name:"venue",onChange:this.handleVenueChange}),r.a.createElement(O.a,{utils:S.a},r.a.createElement(C.a,{value:this.props.showData?this.props.showData.date:this.state.date,onChange:this.handleDateChange})),r.a.createElement(j.a,{control:r.a.createElement(y.a,{checked:this.state.ticketChecked,onChange:this.handleCheckboxClick("ticketChecked"),value:"ticketChecked"}),label:"Do you have a ticket?"}),r.a.createElement(j.a,{control:r.a.createElement(y.a,{checked:this.state.seenChecked,onChange:this.handleCheckboxClick("seenChecked"),value:"seenChecked"}),label:"Did you attend this show?"}),this.props.type?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{type:"submit"},"Save show"),r.a.createElement(g.a,{variant:"contained",color:"secondary",className:"delete",onClick:this.deleteShow},"Delete")):r.a.createElement(g.a,{type:"submit"},"Add show"))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).toggleEditForm=function(){console.log("click"),a.setState({toggleEditForm:!a.state.toggleEditForm})},a.updateShow=function(e){a.props.updateShow(e)},a.saveEditForm=function(){console.log("save")},a.state={showArtistInput:!1,showSaveButton:!1,toggleEditForm:!1,_id:null,date:null,venue:null,artists:[]},a}return Object(w.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data,t=e._id,a=e.date,n=e.venue,r=e.artists;this.setState({_id:t,date:a,venue:n,artists:r})}},{key:"componentWillReceiveProps",value:function(){var e=this.props.data,t=e._id,a=e.date,n=e.venue,r=e.artists;this.setState({_id:t,date:a,venue:n,artists:r})}},{key:"render",value:function(){var e=this;return r.a.createElement(f.a,{style:{maxWidth:345}},r.a.createElement(v.a,null,this.state.toggleEditForm?r.a.createElement(x,{type:"update",updateShow:this.updateShow,toggleEditForm:this.toggleEditForm,handleVenueChange:this.handleVenueChange,showData:this.props.data,deleteShow:this.props.deleteShow}):r.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},r.a.createElement("div",null,r.a.createElement("p",null,"Lineup"),r.a.createElement("ul",null,this.state.artists.map((function(t){return e.state.showArtistInput?r.a.createElement(E.a,{placeholder:t,name:"artist"}):r.a.createElement("li",null,t)}))),this.state.venue," - ",this.state.date),this.state.showSaveButton?r.a.createElement(g.a,{onClick:this.saveEditForm},"Save"):r.a.createElement(g.a,{onClick:this.toggleEditForm},"Edit Show"))))}}]),t}(n.Component),F=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Seen Shows"),this.props.shows.map((function(t){return t.seen?r.a.createElement(A,{key:t.id,data:t,updateShow:e.props.updateShow,deleteShow:e.props.deleteShow}):null})),r.a.createElement("h1",null,"Upcoming Shows"),this.props.shows.map((function(t){return t.seen?null:r.a.createElement(A,{key:t.id,data:t,updateShow:e.props.updateShow,deleteShow:e.props.deleteShow})})))}}]),t}(n.Component),_=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).addNewShow=function(t){var a=e.state.shows,n=[].concat(Object(l.a)(a),[t.data[0]]),r=e.state,s={shows:n},o=Object.assign({},r,s);e.setState(o)},e.updateShow=function(t){var a=e.state.shows,n=e.state,r=(a.find((function(e){return e._id===t.data[0]._id})),{shows:e.state.shows.map((function(e){return e._id===t.data[0]._id?Object.assign(e,t.data[0]):e}))}),s=Object.assign({},n,r);e.setState(s)},e.deleteShow=function(){var t=Object(h.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/shows/delete/".concat(a),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 3:t.sent,e.setState((function(e){return{shows:e.shows.filter((function(e){return e._id!==a}))}})),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.error(t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.state={shows:[]},e}return Object(w.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(c.a.mark((function e(){var t,a,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/shows");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=this.state,r={shows:a.data},s=Object.assign({},n,r),this.setState(s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Showtime")),r.a.createElement("p",null,"Shows"),r.a.createElement(F,{shows:this.state.shows,updateShow:this.updateShow,deleteShow:this.deleteShow}),r.a.createElement("p",null,"Add a show"),r.a.createElement(x,{addNewShow:this.addNewShow}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.a1beade7.chunk.js.map